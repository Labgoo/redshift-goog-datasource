$(document).ready(function () {
	var mime = 'text/x-mariadb';

	// get mime type
	if (window.location.href.indexOf('mime=') > -1) {
			mime = window.location.href.substr(window.location.href.indexOf('mime=') + 5);
	}

	window.editor = CodeMirror.fromTextArea(document.getElementById('sql'), {
			mode: mime,
			indentWithTabs: true,
			smartIndent: true,
			textWrapping: true,
			lineNumbers: true,
			matchBrackets : true,
			autofocus: true
	});

	$('#add-variable').click(function() {
		var inputs = $('.cloned-input');
		var num     = inputs.length; // how many "duplicatable" input fields we currently have
		var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

		var newElem = $(inputs[0]).clone();

		newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);

		// insert the new element after the last "duplicatable" input field
		$(inputs[num-1]).after(newElem); 
	});

	$(document).on('click', '.delete-variable', function() {
		$(this).parent('.cloned-input').remove();
	});
});
